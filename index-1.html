<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="zh_cn">
<head>
<meta charset="utf-8">
<meta name="description" content="description">
<meta name="viewport" content="width=device-width">
<title>博客 (旧文章页 1) | 博客</title>
<link href="assets/css/bitter.css" rel="stylesheet" type="text/css">
<link href="assets/css/main.css" rel="stylesheet" type="text/css">
<link href="assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="assets/css/code.css" rel="stylesheet" type="text/css">
<link href="assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="#">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><style>
    div.input_prompt {
      display: none;
    }
    </style>
</head>
<body>
    <section class="social"><ul>
<li><a href="index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="rss.xml" title="RSS"><i class="icon-rss"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
        <div class="post">
            <h1 class="title"><a href="posts/nikola-web.html">Nikola: 静态博客A.K.A引擎，我是怎样创建Shisaa.jp</a></h1>
            <div class="meta">
                <div class="authordate">
                    <time class="timeago" datetime="2013-08-01T18:52:05+08:00">2013-08-01 18:52</time>
</div>
                <div class="stats">
                                <a href="posts/nikola-web.html#disqus_thread" data-disqus-identifier="cache\posts\nikola-web.html">Comments</a>


                </div>
                        <div itemprop="keywords" class="tags">
        <ul>
        标签 : 
           <li><a class="tag p-category" href="categories/nikola.html" rel="tag">nikola</a></li>
           <li><a class="tag p-category" href="categories/python.html" rel="tag">python</a></li>
           <li><a class="tag p-category" href="categories/web.html" rel="tag">web</a></li>
        </ul>
</div>

            </div>
            <div class="body">
                <div>
<h3>写在前面的话</h3>
<p>当我在Google搜索用git做博客的时候我看到github提供了免费静态页面服务，而且提供Jekyll工具，允许用户用轻量级标记语言（比如Markdown）来写文章，然后生成博客页面。同类的工具还有Octopress。但用的是Ruby语言，在windows下安装环境特别麻烦。因我比较喜欢用Python，再继续搜索，看到了Pelican，只支持Python2.7以上版本，把本地的Python版本更新到2.7版本，好不容易安装好了Pelican环境，但发现Pelican用Makefile来管理项目，而Makefile在Windows下就是一个恶梦。最后看到了Nikola，按照官方文档很快就上手了，而且默认的样式还是特好看的，所以就最终选择了Nikola来建立静态博客。</p>
<p>在Nikola的有一篇文章<a href="http://shisaa.jp/postset/nikola-web.html" title="Goes from installing to developing a custom theme.">Tutorial by Tim van der Linden</a>，正好解决了我对Nikola的一些问题，为了日后查阅方便，也为了能让更多母语是中文的网络爱好者认识Nikola，故翻译了这篇文章。</p>
<hr>
<h3>前言</h3>
<p>首先，非常感谢Nikola创作者Roberto Alsina，给这篇文章<a href="http://getnikola.com/blog/new-nikola-tutorial.html" title="基于Nikola建立博客shisaa.jp">很高的评价</a>，并将其嵌入到Nikola文档中！</p>
<p>当我设计Shisaa.jp的时候我花一些时间思考用怎么样的“后端”。什么样的系统建站...使用CMS吗？
我使用Drupal有丰富的经验，这可能是我的首选......但熟悉Drupal的，也知道一些难以忽视的事实：</p>
<ul>
<li>Drupal是用PHP编写的，这不是我所向往的编程语言。</li>
<li>Drupal有很强大的工具，但运行会慢得像蜗牛，这是一个典型的多用途CMS的负担，几乎这样的框架系统都是这样。</li>
<li>Drupal 8即将推出，这是一个全新和充满亮点的版本，是建立另一框架之上（symfony），所以它是框架之上的框架...在正常的情况下，意味着它将变得更慢。</li>
</ul>
<p>因此，不用Drupal，那用什么呢？Wordpress, Joomla...？这...永远...不可能，它们都是用PHP做后端的语言。</p>
<p>好，不用PHP驱动系统...我更喜欢用Python，所以可能是Plone, Pylons, Pyramid, ...？</p>
<p>可能……</p>
<!-- TEASER_END -->

<p>但仍有一个挥之不去的声音在我的后脑环绕......“我真的需要一个CMS”？</p>
<p>我的意思是，你想想，我只这个网站的唯一作者，不需要其它的用户登录来更新内容，也不需要花哨的界面。
还有安全问题......每一个动态系统在互联网上很容易受各种可怕的攻击......因为他们是动态的。
哦，还有性能问题，访问一些普通的HTML文件绝对比动态拼凑一个页面请求（即使缓存）要快很多倍。</p>
<p>所以我决定建立这个网站用<strong>静态</strong>方式，为什么呢？</p>
<p>当你决定建立自己的静态网站，基本上你有两种选择：</p>
<ol>
<li>手工方式写每个HTML文档</li>
<li>使用一种静态页面生成器</li>
</ol>
<p>如果选择方案一，你必须要花大量的工作在自己的网站上。如果你的网站或博客只包含几页而且只每年更新两次，那这古老​​的手工制作的网页是可行的。但是，如果你需要频繁地更新网站，从头写每一页并且保持所有的菜单和深层链接将成为地狱的工作......这会使你失去所有建立个人网站的乐趣。</p>
<p>这就需要静态页面生成器来帮助你。一旦安装了它，它就会为你做繁重的工作，因此您可以集中精力写你的博客，维护公司的网站，在线更新图片最新事件等..</p>
<p>你会问：“但我将需要大量的技术知识，如果我使用这些类型的系统的话”。不，你不会的。
这些系统只需要很少的一些配置就可以了（但系统本身可不是，为什么？），良好的工具可以让你有条不紊地进行工作！</p>
<h3>关于Nikola</h3>
<p>事实上我对Nikola Tesla有极大的兴趣，我很快就感觉到<a href="http://getnikola.com/" title="Nikola主页">这点</a>，Nikola将是我的首选武器，它是相当快速和优雅的系统，具有不错的功能集合，而且可扩展。它还包含了一个实用的工具包来帮助你建立或创作你的网站。它甚至是多语言的！</p>
<p>去阅读<a href="http://getnikola.com/handbook.html" title="Nikola手册">Roberto Alsina的</a>Nikola手册关于这个项目背后的动机和美丽的功能并提供的工具。在该网站上，你还会发现有相当详细的指南教你如何开始建立自己的网站。尽管Roberto尽最大努力来指导你使用Nikola，但我觉得还有有点抽象，尤其在主题化上，只好自己去探索。</p>
<p>所以我现在带你进行短暂的旅行，告诉你我是如何用Nikola设置，部署和制作这个网站，基于上述原因，主要是基本设置和建立您的自定义主题。</p>
<h3>环境设置</h3>
<p>在进入主题之前，我们必须先配置Nikola......当然配置Nikola，我们必须配置我们的Python环境。
由于许多程序在您的Unix系统上安装了各种版本的Python，有时很难设置一个干净的可以运行你项目的工作空间。
你需要一个基于特定Python版本的沙箱开发环境。对于这个沙箱环境，我使用流行的<a href="http://www.virtualenv.org/" title="Virtualenv工程首页">Virtualenv</a>。</p>
<p>使用Virtualenv你能做到以上所有要求...在你选择的目录下部署一个新的虚拟环境，并把Shell指向那个目录，你就可以开始建网站了。首先来安装Virtualenv：</p>
<pre class="code literal-block"><span class="nv">$ </span>pip install virtualenv
</pre>


<p>现在，我们可以设置我们的虚拟环境</p>
<pre class="code literal-block"><span class="nv">$ </span>virtualenv --python<span class="o">=</span>python2.7 yourdir
</pre>


<p>注意：我告诉Virtualenv使用Python2.7版本，Nikola 5.3 <em>是</em> 兼容Python 3的，但如果你想提供一个很好的谷歌地图XML，你只有采用Python2.x版本。
完成了Virtualenv沙箱的设置，<strong>进到该目录</strong>加载该沙箱环境到当前的Shell：</p>
<pre class="code literal-block"><span class="nv">$ </span><span class="nb">source </span>bin/activate
</pre>


<p>瞧，你会发现在当前目录名插入到你使用的Shell前面，这意味着一切都很好。现在...来安装Nikola！</p>
<pre class="code literal-block"><span class="nv">$ </span>pip install nikola
</pre>


<p>这将会安装的是Nikola5.3（在当时写这的时候），并为您安装所有必要的依赖。现在，我们开始初始化我们的网站。</p>
<h3>初步建立</h3>
<p>要建立一个新的站点，你只要简单地运行：</p>
<pre class="code literal-block"><span class="nv">$ </span>nikola init shisaa.jp
</pre>


<p>自从Nikola 5.2 将创建一个 <em>空</em> 的网站，只包含基本的目录结构和配置文件的示例。
你可以编译这个网站，它将工作在这个沙箱外面。 5.2之前的init命令将生成一个空的网站并填充示范数据。
如果您还想这种行为只需要附加"--demo"标示在init命令后面。</p>
<p>进入你建立的目录，你会发现创建的网站目录结构如下：</p>
<pre class="code literal-block">files
galleries
listings
posts
stories
</pre>


<p>让我们快速看一下每个目录的作用（和Nikola的一些特性）：</p>
<p><em>files</em> 目录包含静态资源，无论你使用什么主题它都是有效的。
<em>Galleries</em> Nikola展示照片画廊功能。在这个目录里，只要你喜欢，你可以创建尽可能多的目录，每一个目录都是单独的画廊。
接下来是 <em>listings</em> ，这个目录将包含源代码列表。你可以把你的原始源代码文件放在这里，Nikola将为这个目录的每个代码文件创建一个目录页和语法高亮的HTML文件。
<em>Posts</em> 是Nikola最重要的目录。该目录将存放您选定的标记语言的文章文件。
最后一个目录是 <em>stories</em> ，它包含了所有的将要显示的“静态”页面（不是贴子页面）。像 <em>关于</em> 或者 <em>联系我们</em> 页面放在这里将感觉非常好。</p>
<p>但在明白Nikola如何处理这些目录之前，我们先看一下配置文件...它控制你的整个Nikola站点。</p>
<h3>创建基本配置</h3>
<p>就像我们上面看到的，基本的站点初始化给你一个内容充实的 <em>conf.py</em> 文件。
为了学习......我建议你备份conf.py文件和建立一个空的文件。</p>
<p>打开你最喜欢的编辑器，让我们开始建立一个新的Nikola站点配置文件。
由于Nikola是一个Python的应用程序，也是用Python语言编写的配置文件。
因此，我们必须做的第一件事是加载一些Python模块，所以Nikola可以成功地解析该文件：</p>
<pre class="code literal-block"><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
</pre>


<p>接下来我们就可以设置我们的网站的一些基本信息和变量，将应用到我们的模板中：</p>
<pre class="code literal-block"><span class="n">BLOG_AUTHOR</span> <span class="o">=</span> <span class="s">"Tim van der Linden"</span>
<span class="n">BLOG_TITLE</span> <span class="o">=</span> <span class="s">"Shisaa.jp"</span>
<span class="n">BLOG_URL</span> <span class="o">=</span> <span class="s">"http://Shisaa.jp"</span>
<span class="n">BLOG_EMAIL</span> <span class="o">=</span> <span class="s">"tim@Shisaa.jp"</span>
<span class="n">BLOG_DESCRIPTION</span> <span class="o">=</span> <span class="s">"A blog about Programming, Japan and Photography"</span>
</pre>


<p>够简单了吧？现在来保存这个文件。它的名字 <em>必须</em> 是conf.py和 <em>必须</em> 保存在你的Nikola站点的根目录下。</p>
<p>接下来要做的事情是告诉Nikola我们想处理的不同内容。因为Nikola是一个博客引擎的心脏，我们会从那里开始。</p>
<p>静态网站生成器遵循大致相同的原则：你用标记语言写你的文章或网页，定义这些标记文件的模板，并把一些静态文件，如CSS或JavaScript，然后你让生成器做所有逻辑和输出目录以HTML格式呈现出来。所以我们首先定义一个地方放我们的博客标记文章文件。在Nikola，默认是 <em>post</em> 目录。实际上，你可以把它放在任何你喜欢的地方，只要你告诉Nikola哪里可以找到它。</p>
<p>所以接下来，我们要进入我们的配置文件建立一个哈希表：</p>
<pre class="code literal-block"><span class="n">post_pages</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s">"posts/*.md"</span><span class="p">,</span> <span class="s">"posts"</span><span class="p">,</span> <span class="s">"post.tmpl"</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span>
<span class="p">)</span>
</pre>


<p>这个哈希表称为 <em>post_pages</em> ，并遵循一定的语法。首先，在我们定义目录下，我们会把我们的文章（基于 <em>md</em> 语法的文件）放在那里。然后我们定义内容的类型，Nikola会在那里找到它，（您还可以定义页面在这里，稍后将会看到），第三项是渲染时使用的模板文件。最后一项是一个布尔值，你可以设置告诉Nikola是否在网站RSS中包括这些文件。</p>
<p>接下来Nikola需要知道用哪种语言写的静态文件。你可以简单地写 <em>HTML</em> 或使用其它Nikola支持的标记语言，如 <em>Markdown</em> 或 <em>reStructuredText</em> 。为此，我们定义另一个称为<em>post_compilers</em>哈希表：</p>
<pre class="code literal-block"><span class="n">post_compilers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"markdown"</span><span class="p">:</span> <span class="p">(</span><span class="s">'.md'</span><span class="p">,</span> <span class="s">'.mdown'</span><span class="p">,</span> <span class="s">'.markdown'</span><span class="p">),</span>
<span class="p">}</span>
</pre>


<p>我的情况只用Markdown。所以这是我唯一的定义。您可以使用更多的语言，在这基础上扩展Nikola并定义使用正确的编译器转换成HTML。</p>
<p>相当的好玩，是不是？</p>
<h3>写你的文章</h3>
<p>Nikola有一个命令来启动一个新的文章：</p>
<pre class="code literal-block"><span class="nv">$ </span>nikola new_post -f markdown
</pre>


<p>它会问你一些必要的元数据并加到文本本身。注意 <em>-f</em> 标志，如果你使用多种标记语言，你将要指定你想要的语言来编写的新的文章。</p>
<p>用不同的方式，对我来说更方便，手动创建你的文章文件，并将其保存在你的文章目录下。</p>
<p>要手动开始一篇文章，只需打开你喜欢的编辑器和文章目录下保存该文件用得体的名字。
对于这个文件我们必须做的第一件事就是宣告一些元数据，Nikola将使用这些数据生成HTML页面，内部链接和标签。
每行只包含一个元数据，使用的语法是，以两个点和空格开始。默认的文章或页面将像这样：</p>
<pre class="code literal-block"><span class="cp">.. title: Your blog post title</span>
<span class="cp">.. slug: any-unique-slug-you-like</span>
<span class="cp">.. date: 2013/02/27 18:52:05</span>
<span class="cp">.. tags: web, blog</span>
</pre>


<p>配置之后你可以开始写你心爱的文章，用你标记的语言格式，就是定义在 <em>conf.py</em> 的标语语言。</p>
<h3>第一次编译</h3>
<p>好，虽然对于这个过程有点早，但我们已经可以做一个测试版本看到目前为止的效果，明确我们已经做了什么。</p>
<p>只要运行下面的命令并观察输出结果：</p>
<pre class="code literal-block"><span class="nv">$ </span>nikola build
</pre>


<p>Nikola将创建一个名为"output"的目录，整个网站的结构将放在那里。
关于构建过程中的一个不错的细节，就是它仅仅编译修改过的文件和依赖文件。
也就是说你更新的博客文章，只有博客的文章将被重新渲染，包括文件中链接指向到该文章....仅此而已。
这意味着，你最初的构建可能需要几秒钟，但在那之后就更快了！</p>
<p>如果一切顺利的话，你现在可以查验实际的编译结果。
怎么样做到呢，你可以设置一个Web服务器并指向 "output" 目录...或者你可以使用Nikola来构建服务器。
在同一个站点的根目录下，启动Nikola来建立服务器：</p>
<pre class="code literal-block"><span class="nv">$ </span>nikola serve
</pre>


<p>看吧...你在浏览器上输出“http://localhost:8000”（端口配置在你网站的config.py文件中），看到是多么美丽的画面！
我通常会打开一个新的终端，并运行Nikola​​服务器，只有这样，我在主终端可以随时用 "nikola build" 编译文章。
请记住，对于每一个新的终端，开始之前要再次设置你的虚拟环境源。</p>
<p>“但是网站看起来像Nikola的首页！”，你会说。这是对的。
你看到的是Nikola自带的默认主题。
我们希望网站完全是我们自己的，所以这也意味着要自定义生成主题。</p>
<p>所以，你猜怎么着...接下来： <em>创建你的主题</em> ！</p>
<h3>创建主题样式</h3>
<p>正如我们上面看到的，你可以告诉Nikola使用已经定义在 <em>post_pages</em> 哈希表中的任何一个模板文件（模板文本用 <em>tmpl</em> 后缀名）。
但这些模板文件，位于何处？嗯......在一个主题中。</p>
<p>Nikola始终搜索 <em>themes</em> 目录中的主题并加载你定义在 <em>conf.py</em> 中的主题：</p>
<pre class="code literal-block"><span class="n">THEME</span> <span class="o">=</span> <span class="s">'shisaa'</span>
</pre>


<p>现在Nikola将在 <em>themes</em> 目录下搜索名为 <em>shisaa</em> 的目录。</p>
<p>“等一下！”，你迅速发问，“我之前没有配置一个主题，但仍然有默认的...是什么魔力发生这一切？”</p>
<p>嗯，很高兴你发问。</p>
<p>当你安装Nikola之后，Nikola已经附带了几个主题。</p>
<p>这些的主题存放在Nikola的源码中。得到它们，你只需打开 <em>lib</em> 目录在你的Python安装目录下。
请记住，如果你通过Virtualenv安装的Python，那么你需要打开这个环境的 <em>lib</em> 目录。</p>
<p>在你的 <em>lib</em> 中你将会看到你的Python版本，打开之后你会发现有个目录叫 <em>site-packages</em>。
在那里你会看到Nikola目录，在那里有名叫 <em>data</em> 目录。
在 <em>data</em> 目录下有一个名叫 <em>themes</em> 的目录，里面包含了所有的基本主题。
如果你没有定义任何主题在你的conf.py中，它会使用名为 <em>default</em> 主题。</p>
<p>呵呵，谜底揭晓！</p>
<p>也许你会发现：在主题中有一个叫 <em>Orphan</em> 的主题。这实际上是一个剥离下来的主题，你可以使用它。
所以如果你厌倦去阅读代码，只需复制到你的主题目录，重新命名，并开始调整主题。
或者只是继续阅读代码...跟我一样会找到更多的乐趣！</p>
<p>你还在吗？好！让我们继续主题化！</p>
<p>Nikola支持 <em>Mako</em> 或者 <em>Jinja</em> 主题引擎，我选择 <em>Mako</em> 生成shisaa主题。
Mako只需要几个目录在你的主题目录里面，在那里你可以存储不同类型的文件。你基本上需要三个目录：</p>
<ul>
<li>assets</li>
<li>templates</li>
<li>messages</li>
</ul>
<p><em>assets</em> 目录将包含所有的静态文件，如CSS, Javascript, images，...都是针对你的主题的。
<em>Templates</em> 将存放真正的 <em>.tmpl</em> 文件。
最后 <em>messages</em> 目录包含Nokia支持的多语言文件。现在，我们将只专注于英语。</p>
<p>让我们先从最精彩的 <em>templates</em> 目录开始。</p>
<p>Nikola使用一组硬编码文件名的模板文件，他将会被找到。
在Nikola的<a href="http://getnikola.com/theming.html" title="基本主题化的文档">基本主题文件</a>是：</p>
<ul>
<li>base.tmpl</li>
<li>index.tmpl</li>
<li>post.tmpl</li>
<li>listing.tmpl</li>
<li>list.tmpl</li>
<li>list_post.tmpl</li>
<li>tags.tmpl</li>
</ul>
<p>还有少数其它几个（即 <em>gallery.tmpl</em>, <em>story.tmpl</em> ），但这个更进一步的特性。</p>
<p>但在开始编译这些文件之前，让我们对Mako有一个大概的了解：</p>
<p>Mako是用Python编写的模板引擎来<em>运行</em>Python。它与Python语言有非常密切的关系。一个Mako模板文件可以很容易从其它Mako模板文件继承，使您能保持模板的逻辑整洁。你可以继承一个文件，使用下面的语法：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
</pre>


<p>接下来你将使用继承的模板块代码，你使用你的主模板：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"footer"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;div id="footer"&gt;</span>
<span class="x">        &lt;p&gt;This is a footer, just static html!&lt;/p&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>现在在你继承的模板文件中你可以调用该功能块，像这样：</p>
<pre class="code literal-block"><span class="cp">${</span><span class="n">footer</span><span class="p">()</span><span class="cp">}</span><span class="x"></span>
</pre>


<p>除了继承，你可以使用任何Python代码嵌入到你的模板文件中。
要使用Python代码，以 <em>&lt;%</em> 开始和 <em>%&gt;</em> 结束你的代码块来完成：</p>
<pre class="code literal-block"><span class="cp">&lt;%!</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s">"foobar"</span>
<span class="cp">%&gt;</span><span class="x"></span>
</pre>


<p>当然，你也可以使用控制结构构建循环或进行简单的判断，甚至捕获异常，...
我建议你​​去阅读<a href="http://docs.makotemplates.org/en/latest/" title="Mako的文档">Mako的文档</a>，你将会发现这是个非常强大的模板语言。
现在，让我们动手创建一个主题采用Mako的语法！</p>
<p>如果你还没有这样做，在你的Nikola项目的根目录下创建你的主题目录，然后在 <em>conf.py</em> 中宣告你的主题。</p>
<p>主题需求的第一件事是翻译的语言信息，即使你的网站将是只用一种语言，你仍然需要设置正确的翻译字符串。
该消息翻译存储你的主题中称为 "messages" 的目录下。所以打开你的主题并创建该目录。</p>
<p>你想支持的每种翻译语言采用的语法如下：<strong>语言代码</strong><em>_messages.py</em>。
例如默认的英文翻译，创建一个文件名为 <em>en_messages.py</em>。
此文件 <em>必须</em> 有导入模块和叫 <em>MESSAGES</em> 的字典包含如下固定数量的项：</p>
<pre class="code literal-block"><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="n">MESSAGES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"LANGUAGE"</span><span class="p">:</span> <span class="s">"English"</span><span class="p">,</span>
    <span class="s">"Posts for year </span><span class="si">%s</span><span class="s">"</span><span class="p">:</span> <span class="s">"Posts for year </span><span class="si">%s</span><span class="s">"</span><span class="p">,</span>
    <span class="s">"Archive"</span><span class="p">:</span> <span class="s">"Archive"</span><span class="p">,</span>
    <span class="s">"Posts about </span><span class="si">%s</span><span class="s">"</span><span class="p">:</span> <span class="s">"Posts about </span><span class="si">%s</span><span class="s">"</span><span class="p">,</span>
    <span class="s">"Tags"</span><span class="p">:</span> <span class="s">"Tags"</span><span class="p">,</span>
    <span class="s">"Also available in"</span><span class="p">:</span> <span class="s">"Also available in"</span><span class="p">,</span>
    <span class="s">"More posts about"</span><span class="p">:</span> <span class="s">"More posts about"</span><span class="p">,</span>
    <span class="s">"Posted"</span><span class="p">:</span> <span class="s">"Posted"</span><span class="p">,</span>
    <span class="s">"Original site"</span><span class="p">:</span> <span class="s">"Original site"</span><span class="p">,</span>
    <span class="s">"Read in English"</span><span class="p">:</span> <span class="s">"Read in English"</span><span class="p">,</span>
    <span class="s">"Newer posts"</span><span class="p">:</span> <span class="s">"Newer posts"</span><span class="p">,</span>
    <span class="s">"Older posts"</span><span class="p">:</span> <span class="s">"Older posts"</span><span class="p">,</span>
    <span class="s">"Previous post"</span><span class="p">:</span> <span class="s">"Previous post"</span><span class="p">,</span>
    <span class="s">"Next post"</span><span class="p">:</span> <span class="s">"Next post"</span><span class="p">,</span>
    <span class="s">"old posts page </span><span class="si">%d</span><span class="s">"</span><span class="p">:</span> <span class="s">"old posts page </span><span class="si">%d</span><span class="s">"</span><span class="p">,</span>
    <span class="s">"Read more"</span><span class="p">:</span> <span class="s">"Read more"</span><span class="p">,</span>
    <span class="s">"Source"</span><span class="p">:</span> <span class="s">"Source"</span><span class="p">,</span>
<span class="p">}</span>
</pre>


<p>即使你不使用这些翻译，你仍然需要保留着。</p>
<p>接下来我们来构建我们的实际呈现出最终的HTML模板文件。</p>
<p><strong>警告：每个TMPL文件的改变更适合我的Shisaa.jp的需要。我不作评论或多种语言功能。如果你想看到原来的主题代码，请仔细阅读 Orphan 主题的 tmpl 文件！</strong></p>
<p>因为我们需要相当多的HTML片段和很多Mako的结构在我们的模板文件中，可以想象是非常不可读的。
为了防止这种情况，有是一个很好的做法，利用Mako的<em>定义块</em>。
正如我们先前看到的，Mako让您能够定义的“代码块”，你以后可以很简单地调用函数块。</p>
<p>你问我：“我要怎么才能做到呢？”。</p>
<p>好吧，让我们按所说的进行练习，在你的<em>templates</em>目录下创建两个文件。
一个称为 <em>base.tmpl</em> ，另一个称为 <em>base_helper.tmpl</em>。
<em>base.tmpl</em> 是主模板文件，也就是HTML标记的框架。这里定义了 <em>head</em>, <em>html</em> 和 <em>body</em> 标记。
<em>base_helper.tmpl</em> ，Nikola不关心这个文件，但你可以用它来保存可重用的定义块，这样你可以保持<em>base.tmpl</em>的简洁。
其实，你可以调用户任何称为"helper"的文件（或只要你高兴，可以创造尽可能多的helper文件），但清晰地命名 <em>base_helper.tmpl</em> 是这样一个不错的选择。</p>
<p>现在，让我们使用这些文件，怎么样？</p>
<p>首先，要在文件 <em>base.tmpl</em> 能够使用自定义的块中声明，你首先要告诉 <em>base.tmpl</em> 文件。
你可以简单地导入定义块使用Mako的“命名空间”属性：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">file=</span><span class="s">"base_helper.tmpl import="</span><span class="err">*"</span><span class="cp">/&gt;</span><span class="x"></span>
</pre>


<p>这一行简单地告诉Mako从 <em>base_helper.tmpl</em> 文件导入所有的定义块。
如果你只想要导入helper文件中的部分块，只需删除通配符(*)，将名字组成用逗号分隔的字符串放在 <em>import=""</em> 属性中。
将这一行放在 <em>base.tmpl</em> 文件的顶部。</p>
<p>在开始之前，让我们在 <em>base.tmpl</em> 中创建框架代码。
shisaa框架看起来有点像这样：</p>
<pre class="code literal-block"><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"${lang}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre>


<p>但是这虽然美丽，但只能显示为空白页。我们需要显示实际内容。</p>
<p>首先，<em>head</em>，你不觉得它看起来很空吗？没有标题，没有css，没有favicon，...
我们可以直接把它放在 <em>base.tmpl</em> 文件中，但我们希望它尽可能整洁。
所以最好是在 <em>base_helpers.tmpl</em> 文件中定义，让我们来定义header块：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_head()"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;meta charset="utf-8"&gt;</span>
<span class="x">    &lt;meta name="title" content="</span><span class="cp">${</span><span class="n">title</span><span class="cp">}</span><span class="x"> | </span><span class="cp">${</span><span class="n">blog_title</span><span class="cp">}</span><span class="x">" &gt;</span>
<span class="x">    &lt;meta name="description" content="</span><span class="cp">${</span><span class="n">description</span><span class="cp">}</span><span class="x">" &gt;</span>
<span class="x">    &lt;meta name="author" content="</span><span class="cp">${</span><span class="n">blog_author</span><span class="cp">}</span><span class="x">"&gt;</span>
<span class="x">    &lt;title&gt;</span><span class="cp">${</span><span class="n">title</span><span class="cp">}</span><span class="x"> | </span><span class="cp">${</span><span class="n">blog_title</span><span class="cp">}</span><span class="x">&lt;/title&gt;</span>
<span class="x">    &lt;link type="image/x-icon" href="/assets/img/favicon.ico" rel="icon" /&gt;</span>
<span class="x">    &lt;link type="image/x-icon" href="/assets/img/favicon.ico" rel="shortcut icon" /&gt;</span>
<span class="x">    &lt;link href="/assets/css/reset.css" rel="stylesheet" type="text/css"/&gt;</span>
<span class="x">    &lt;link href="/assets/css/theme.css" rel="stylesheet" type="text/css"/&gt;</span>
<span class="x">    &lt;!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --&gt;</span>
<span class="x">    &lt;!--[if lt IE 9]&gt;</span>
<span class="x">    &lt;script src="/assets/js/html5shiv.js" type="text/javascript"&gt;&lt;/script&gt;</span>
<span class="x">    &lt;script src="/assets/js/html5shiv-print.js" type="text/javascript"&gt;&lt;/script&gt;</span>
<span class="x">    &lt;![endif]--&gt;</span>
    <span class="cp">%</span><span class="k">if</span> <span class="n">rss_link</span><span class="p">:</span><span class="x"></span>
<span class="x">        </span><span class="cp">${</span><span class="n">rss_link</span><span class="cp">}</span>
    <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>这看起来有点像你所期望的 <em>head</em> 标记，对不对？</p>
<p>正如你看到，我们可以在主题里使用存储在<em>conf.py</em>的变量。
要使用一个变量，你只需用 <em>${}</em> 语法。也就是你看到 <em>${lang}</em> 变量设置在当前的HTML文件<em>base.tmpl</em>中。
注意有一些变量不在配置文件里定义（如 <em>title</em> ），而是从你的文章或网页的标记文件的元数据里面得到。</p>
<p>所以现在我们有一个整洁的header，但如何放在<em>base.tmpl</em>的正确位置？
简单地通过使用与呈现变量的相同语法，唯一的区别是，应该被称为定义块——他们的功能，而不是简单的变量。
这意味着需要调用，用 <em>${foo()}</em> 而不是 <em>${foo}</em>。
所以调用这个定义块在<em>头</em>部：</p>
<pre class="code literal-block"><span class="cp">&lt;!DOCTYPE HTML&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"${lang}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        ${html_head()}
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre>


<p>现在，关于 <em>body</em> 部分？这里需要显示我们的文章或页面等的实际内容..
我们总是希望在屏幕上显示一个固定的标题，所以让我们添加一个很好语义的 <em>h1</em> 来包含标题，并使其可随时点击回到主页：</p>
<pre class="code literal-block"><span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">"blog-title"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"${abs_link('/')}"</span> <span class="na">title=</span><span class="s">"${blog_title}"</span><span class="nt">&gt;</span>${blog_title}<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/h1&gt;</span>
</pre>


<p>下一步，我们需要一个占位符，这样Nikola就知道在哪里呈现所有的内容在我们架构中。
在这里我们可以引进Mako的 <em>继承</em> 概念。</p>
<p>我们所要做的唯一事情是定义一个 <em>block</em> 让所有其他的模板文件来填充。
你的页面标题下面，加入下面的内容：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>所有其他模板将参考此标记，并在那里将内容呈现出来。
这些模板将需要继承自<em>base.tmpl</em>：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
</pre>


<p>他们将包含相同名称的块，具体的模板标记如下：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    ...</span>
<span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>是不很简单？</p>
<p>如果你还不完全明白，不用担心，我们还会回来，首先让我们完成我们的<em>base.tmpl</em>。</p>
<p>我还需要呈现页脚的内容：</p>
<pre class="code literal-block"><span class="cp">${</span><span class="n">content_footer</span><span class="cp">}</span><span class="x"></span>
</pre>


<p>但 <em>content_footer</em> 这个变量从哪里来的呢？在conf.py中定义：</p>
<pre class="code literal-block"><span class="n">CONTENT_FOOTER</span> <span class="o">=</span> <span class="s">'Contents &amp;copy; {date} &lt;a href="mailto:{email}"&gt;{author}&lt;/a&gt; - Powered by &lt;a href="http://getnikola.com"&gt;Nikola&lt;/a&gt;'</span>
</pre>


<p>在你的配置文件中找到这行，并调整成为你的要求！</p>
<p>现在唯一缺少的是一个菜单。</p>
<p>你会注意到shisaa有一个侧边风格的菜单。
这个菜单生成的链接是在conf.py中的<em>SIDEBAR_LINKS</em>字典中定义：</p>
<pre class="code literal-block"><span class="n">SIDEBAR_LINKS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">DEFAULT_LANG</span><span class="p">:</span> <span class="p">(</span>
        <span class="p">(</span><span class="s">'/'</span><span class="p">,</span> <span class="s">'Home'</span><span class="p">),</span>
        <span class="p">(</span><span class="s">'/archive.html'</span><span class="p">,</span> <span class="s">'Blog),</span>
        <span class="p">(</span><span class="s">'/stories/about.html'</span><span class="p">,</span> <span class="s">'About),</span>
    <span class="p">),</span>
<span class="p">}</span>
</pre>


<p>你会发现菜单中也多语种，但因为我只使用一种语言，只宣告 <em>DEFAULT_LANG</em> 字典就足够。
在字典中，你首先宣告链接路径，然后是你想显示的菜单名称。
这个标记定义在 <em>base_helper.tmpl</em> 文件中：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_sidebar_links()"</span><span class="cp">&gt;</span>
    <span class="cp">%</span><span class="k">for</span> <span class="n">url</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">sidebar_links</span><span class="p">[</span><span class="n">lang</span><span class="p">]:</span><span class="x"></span>
        <span class="cp">%</span> <span class="k">if</span> <span class="n">rel_link</span><span class="p">(</span><span class="n">permalink</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span> <span class="o">==</span> <span class="s">"#"</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li class="active"&gt;&lt;a href="</span><span class="cp">${</span><span class="n">url</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">text</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
        <span class="cp">%</span><span class="k">else</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li&gt;&lt;a href="</span><span class="cp">${</span><span class="n">url</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">text</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
        <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
    <span class="cp">%</span><span class="k">endfor</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>“这是怎么得来的呢？”，你可能会感到奇怪。</p>
<p>正如我们已经看到我们的小Mako的介绍，你有可以在模板里使用内部控制结构和循环。
上面我们看到这两者的定义块。</p>
<p>首先，我们在 <em>SIDEBAR_LINKS</em> 字典的当前（或默认）语言循环。
在字典的每一项页面链接如果是指向当前页，那么就加上 "<em>active</em>" 样式。
这样我们的工具栏菜单就被渲染了。</p>
<p>当我们把所有这些内容放在一起，shisaa的<em>base.tmpl</em>看起来像这样子：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">file=</span><span class="s">"base_helper.tmpl"</span> <span class="na">import=</span><span class="s">"*"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html lang="</span><span class="cp">${</span><span class="n">lang</span><span class="cp">}</span><span class="x">"&gt;</span>
<span class="x">    &lt;head&gt;</span>
<span class="x">        </span><span class="cp">${</span><span class="n">html_head</span><span class="p">()</span><span class="cp">}</span><span class="x"></span>
<span class="x">    &lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        &lt;h1 id="blog-title"&gt;</span>
<span class="x">            &lt;a href="</span><span class="cp">${</span><span class="n">abs_link</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span><span class="cp">}</span><span class="x">" title="</span><span class="cp">${</span><span class="n">blog_title</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">blog_title</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
<span class="x">        &lt;/h1&gt;</span>
<span class="x">        &lt;ul id="sidebar"&gt;</span>
<span class="x">            &lt;li&gt;</span>
<span class="x">                </span><span class="cp">${</span><span class="n">html_sidebar_links</span><span class="p">()</span><span class="cp">}</span><span class="x"></span>
<span class="x">            &lt;li&gt;</span>
<span class="x">        &lt;/ul&gt;</span>
<span class="x">        &lt;div id="content"&gt;</span>
<span class="x">            </span><span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">        &lt;/div&gt;</span>
<span class="x">        &lt;div id="footer"&gt;</span><span class="cp">${</span><span class="n">content_footer</span><span class="cp">}</span><span class="x">&lt;/div&gt;</span>
<span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre>


<p><em>base_helper.tmpl</em> 看起来像这样子：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_head()"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;meta charset="utf-8"&gt;</span>
<span class="x">    &lt;meta name="title" content="</span><span class="cp">${</span><span class="n">title</span><span class="cp">}</span><span class="x"> | </span><span class="cp">${</span><span class="n">blog_title</span><span class="cp">}</span><span class="x">" &gt;</span>
<span class="x">    &lt;meta name="description" content="</span><span class="cp">${</span><span class="n">description</span><span class="cp">}</span><span class="x">" &gt;</span>
<span class="x">    &lt;meta name="author" content="</span><span class="cp">${</span><span class="n">blog_author</span><span class="cp">}</span><span class="x">"&gt;</span>
<span class="x">    &lt;title&gt;</span><span class="cp">${</span><span class="n">title</span><span class="cp">}</span><span class="x"> | </span><span class="cp">${</span><span class="n">blog_title</span><span class="cp">}</span><span class="x">&lt;/title&gt;</span>
<span class="x">    &lt;link type="image/x-icon" href="/assets/img/favicon.ico" rel="icon" /&gt;</span>
<span class="x">    &lt;link type="image/x-icon" href="/assets/img/favicon.ico" rel="shortcut icon" /&gt;</span>
<span class="x">    &lt;link href="/assets/css/reset.css" rel="stylesheet" type="text/css"/&gt;</span>
<span class="x">    &lt;link href="/assets/css/theme.css" rel="stylesheet" type="text/css"/&gt;</span>
<span class="x">    &lt;!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --&gt;</span>
<span class="x">    &lt;!--[if lt IE 9]&gt;</span>
<span class="x">    &lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"&gt;&lt;/script&gt;</span>
<span class="x">    &lt;![endif]--&gt;</span>
    <span class="cp">%</span><span class="k">if</span> <span class="n">rss_link</span><span class="p">:</span><span class="x"></span>
<span class="x">        </span><span class="cp">${</span><span class="n">rss_link</span><span class="cp">}</span>
    <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>

<span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_sidebar_links()"</span><span class="cp">&gt;</span>
    <span class="cp">%</span><span class="k">for</span> <span class="n">url</span><span class="p">,</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">sidebar_links</span><span class="p">[</span><span class="n">lang</span><span class="p">]:</span><span class="x"></span>
        <span class="cp">%</span> <span class="k">if</span> <span class="n">rel_link</span><span class="p">(</span><span class="n">permalink</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span> <span class="o">==</span> <span class="s">"#"</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li class="active"&gt;&lt;a href="</span><span class="cp">${</span><span class="n">url</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">text</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
        <span class="cp">%</span><span class="k">else</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li&gt;&lt;a href="</span><span class="cp">${</span><span class="n">url</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">text</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
        <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
    <span class="cp">%</span><span class="k">endfor</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>恭喜你，我们已经设置了我们模板的主框架！</p>
<p>接下来，我们来看看将要呈现<em>内容</em>的其它部分。
在我们模板探索的开始，我们看到了Nikola成功建立你的网站最少要包含的模板文件列表。
我们只是完成<em>base.tmpl</em>，还有哪些呢？</p>
<ul>
<li><s>base.tmpl<s></s></s></li>
<li>index.tmpl</li>
<li>post.tmpl</li>
<li>listing.tmpl</li>
<li>list.tmpl</li>
<li>list_post.tmpl</li>
<li>tags.tmpl</li>
</ul>
<p>文件 <em>index.tmpl</em> 会呈现出相应的 <em>index.html</em> 的内容。
在大多数博客的首页包含最新的几篇文章，或者只包含最新的一个帖子，通过下一贴的方式显示旧的帖子。
我选择了后者，滚动20页长的索引页看起来不顺眼。</p>
<p>所以我的 <em>index.tmpl</em>：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"helper"</span> <span class="na">file=</span><span class="s">"index_helper.tmpl"</span> <span class="na">import=</span><span class="s">"*"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span>
    <span class="cp">%</span><span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span><span class="x"></span>
        <span class="cp">%</span><span class="k">if</span> <span class="p">(</span><span class="n">loop</span><span class="o">.</span><span class="n">first</span><span class="p">):</span><span class="x"></span>
<span class="x">            &lt;div class="index-post"&gt;</span>
<span class="x">                &lt;h2&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">&lt;/h2&gt;</span>
<span class="x">                &lt;p class="post-date"&gt;</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="x"> - &lt;/p&gt;</span>
<span class="x">                </span><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">html_tags</span><span class="p">(</span><span class="n">post</span><span class="p">)</span><span class="cp">}</span><span class="x"></span>
<span class="x">                &lt;div class="index-post-text"&gt;</span>
<span class="x">                    </span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x"></span>
<span class="x">                &lt;/div&gt;</span>
<span class="x">                </span><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">html_pager</span><span class="p">(</span><span class="n">post</span><span class="p">)</span><span class="cp">}</span><span class="x"></span>
<span class="x">            &lt;/div&gt;</span>
        <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
    <span class="cp">%</span><span class="k">endfor</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>我们在顶部我们继承了base.tmpl文件。接下来我们加载了辅助文件，这个辅助文件将包含标签和页面渲染的逻辑。
最后我们呈现出我们的基本标记。因为我只想显示第一篇文章（最新文章），我用Mako的<a href="http://docs.makotemplates.org/en/latest/runtime.html" title="Mako的循环逻辑环的更多内容">循环逻辑</a>，但只显示循环的第一次迭代。</p>
<p><em>index_helper.tmpl</em> 看起来像这样子：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_tags(post)"</span><span class="cp">&gt;</span>
    <span class="cp">%</span> <span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span><span class="x"></span>
<span class="x">        &lt;ul class="tags"&gt;</span>
            <span class="cp">%</span><span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">post</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span><span class="x"></span>
<span class="x">                &lt;li class="tag"&gt;&lt;a href="</span><span class="cp">${</span><span class="n">_link</span><span class="p">(</span><span class="s">'tag'</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">tag</span><span class="cp">}</span><span class="x">&lt;/a&gt;&lt;/li&gt;          </span>
            <span class="cp">%</span><span class="k">endfor</span><span class="x"></span>
<span class="x">        &lt;/ul&gt;</span>
    <span class="cp">%</span><span class="k"> endif</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>

<span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_pager(post)"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;ul class="pager"&gt;</span>
        <span class="cp">%</span><span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">prev_post</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li class="previous"&gt;</span>
<span class="x">                &lt;a href="</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">prev_post</span><span class="o">.</span><span class="n">permalink</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">"&gt;&amp;larr; </span><span class="cp">${</span><span class="n">messages</span><span class="p">[</span><span class="n">lang</span><span class="p">][</span><span class="s">"Previous post"</span><span class="p">]</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
<span class="x">            &lt;/li&gt;</span>
        <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
        <span class="cp">%</span><span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">next_post</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li class="next"&gt;</span>
<span class="x">                &lt;a href="</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">next_post</span><span class="o">.</span><span class="n">permalink</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">messages</span><span class="p">[</span><span class="n">lang</span><span class="p">][</span><span class="s">"Next post"</span><span class="p">]</span><span class="cp">}</span><span class="x"> &amp;rarr;&lt;/a&gt;</span>
<span class="x">            &lt;/li&gt;</span>
        <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
<span class="x">    &lt;/ul&gt;</span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>很好，所有的索引中多了一个完成的项：</p>
<ul>
<li><s>base.tmpl</s></li>
<li><s>index.tmpl</s></li>
<li>post.tmpl</li>
<li>listing.tmpl</li>
<li>list.tmpl</li>
<li>list_post.tmpl</li>
<li>tags.tmpl</li>
</ul>
<p>下一逻辑步骤在我们文章本身，专用的单个帖子页。这由 <em>post.tmpl</em> 处理。
对于这里的每一个文件我们可以看到都是采用相同的模式：他们都是从 <em>base.tmpl</em> 继承 <em>content</em> 块。
所以，我们只看一部分。</p>
<p>下面是我渲染文章的模板：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span><span class="nb">namespace</span> <span class="na">name=</span><span class="s">"helper"</span> <span class="na">file=</span><span class="s">"post_helper.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;div class="postbox"&gt;</span>
<span class="x">        </span><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">html_title</span><span class="p">()</span><span class="cp">}</span><span class="x"></span>
<span class="x">        &lt;small&gt;</span>
<span class="x">            </span><span class="cp">${</span><span class="n">messages</span><span class="p">[</span><span class="n">lang</span><span class="p">][</span><span class="s">"Posted"</span><span class="p">]</span><span class="cp">}</span><span class="x">: </span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="x"></span>
<span class="x">            </span><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">html_tags</span><span class="p">(</span><span class="n">post</span><span class="p">)</span><span class="cp">}</span><span class="x"></span>
<span class="x">        &lt;/small&gt;</span>
<span class="x">        </span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x"></span>
<span class="x">        </span><span class="cp">${</span><span class="n">helper</span><span class="o">.</span><span class="n">html_pager</span><span class="p">(</span><span class="n">post</span><span class="p">)</span><span class="cp">}</span><span class="x"></span>
<span class="x">    &lt;/div&gt;</span>
<span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>还有helper文件：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_title()"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;h1&gt;</span><span class="cp">${</span><span class="n">title</span><span class="cp">}</span><span class="x">&lt;/h1&gt;</span>
    <span class="cp">%</span> <span class="k">if</span> <span class="n">link</span><span class="p">:</span><span class="x"></span>
<span class="x">        &lt;p&gt;&lt;a href='</span><span class="cp">${</span><span class="n">link</span><span class="cp">}</span><span class="x">'&gt;</span><span class="cp">${</span><span class="n">messages</span><span class="p">[</span><span class="n">lang</span><span class="p">][</span><span class="s">"Original site"</span><span class="p">]</span><span class="cp">}</span><span class="x">&lt;/a&gt;&lt;/p&gt;</span>
    <span class="cp">%</span><span class="k"> endif</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>

<span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_tags(post)"</span><span class="cp">&gt;</span>
    <span class="cp">%</span><span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span><span class="x"></span>
<span class="x">        </span><span class="cp">${</span><span class="n">messages</span><span class="p">[</span><span class="n">lang</span><span class="p">][</span><span class="s">"More posts about"</span><span class="p">]</span><span class="cp">}</span>
        <span class="cp">%</span><span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">post</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;a class="tag" href="</span><span class="cp">${</span><span class="n">_link</span><span class="p">(</span><span class="s">'tag'</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">"&gt;&lt;span class="badge badge-info"&gt;</span><span class="cp">${</span><span class="n">tag</span><span class="cp">}</span><span class="x">&lt;/span&gt;&lt;/a&gt;</span>
        <span class="cp">%</span><span class="k">endfor</span><span class="x"></span>
    <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>

<span class="cp">&lt;%</span><span class="nb">def</span> <span class="na">name=</span><span class="s">"html_pager(post)"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;ul class="pager"&gt;</span>
        <span class="cp">%</span><span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">prev_post</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li class="previous"&gt;</span>
<span class="x">                &lt;a href="</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">prev_post</span><span class="o">.</span><span class="n">permalink</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">"&gt;&amp;larr; </span><span class="cp">${</span><span class="n">messages</span><span class="p">[</span><span class="n">lang</span><span class="p">][</span><span class="s">"Previous post"</span><span class="p">]</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
<span class="x">            &lt;/li&gt;</span>
        <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
        <span class="cp">%</span><span class="k">if</span> <span class="n">post</span><span class="o">.</span><span class="n">next_post</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li class="next"&gt;</span>
<span class="x">                &lt;a href="</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">next_post</span><span class="o">.</span><span class="n">permalink</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">messages</span><span class="p">[</span><span class="n">lang</span><span class="p">][</span><span class="s">"Next post"</span><span class="p">]</span><span class="cp">}</span><span class="x"> &amp;rarr;&lt;/a&gt;</span>
<span class="x">            &lt;/li&gt;</span>
        <span class="cp">%</span><span class="k">endif</span><span class="x"></span>
<span class="x">    &lt;/ul&gt;</span>
<span class="cp">&lt;/%</span><span class="nb">def</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>现在，这一切看起来都很简单。我们在helper文件了定义三个块，其中最后两个我们同时在 <em>index_helper.tmpl</em> 中使用：</p>
<ul>
<li>第一块渲染标题。</li>
<li>第二块渲染标签并链接到一个页面，这个页面列出包含该标签的所有文章。</li>
<li>最后是一个导航可以显示新文章或者老文章。</li>
</ul>
<p>很简单，对不对？
再划掉一个：</p>
<ul>
<li><s>base.tmpl</s></li>
<li><s>index.tmpl</s></li>
<li>
<s>post.tmpl</s> </li>
<li>listing.tmpl</li>
<li>list.tmpl</li>
<li>list_post.tmpl</li>
<li>tags.tmpl</li>
</ul>
<p>下一个是渲染代码清单的功能，就是我们之前看到的文章，看起来像这样：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;ul class="breadcrumb"&gt;</span>
        <span class="cp">%</span> <span class="k">for</span> <span class="n">link</span><span class="p">,</span> <span class="n">crumb</span> <span class="ow">in</span> <span class="n">crumbs</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li&gt;&lt;a href="</span><span class="cp">${</span><span class="n">link</span><span class="cp">}</span><span class="x">"&gt;/ </span><span class="cp">${</span><span class="n">crumb</span><span class="cp">}</span><span class="x">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="cp">%</span><span class="k"> endfor</span><span class="x"></span>
<span class="x">    &lt;/ul&gt;</span>
<span class="x">    </span><span class="cp">${</span><span class="n">code</span><span class="cp">}</span><span class="x"></span>
<span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>We first render out a breadcrumb that resembles the path of the file in a hierarchical directory structure and after that we simply render the code. That's it!
我们先呈现出类似于面包屑的分层目录结构的文件，然后我们只是简单的渲染它。再看看！</p>
<ul>
<li><s>base.tmpl</s></li>
<li><s>index.tmpl</s></li>
<li><s>post.tmpl</s></li>
<li><s>listing.tmpl</s></li>
<li>list.tmpl</li>
<li>list_post.tmpl</li>
<li>tags.tmpl</li>
</ul>
<p>最后我们只剩下三个文件， <em>list.tmpl</em>, <em>list_post.tmpl</em> 和 <em>tags.tmpl</em> ，使用几乎相同的模板。
它们之间的主要区别是他们有自己的数据。
<em>list.tmpl</em> 有 <em>items</em> 词典提供一般的链接， <em>list_post.tmpl</em> 得到 <em>posts</em> 目录包含所有的文章， <em>tags.tmpl</em> 得到一字典包含所有标签信息。</p>
<p><em>list_post.tmpl</em> 用来按年份来显示文章的列表（当用存档显示的方式浏览）。该模板看起来像这样：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;!--Body content--&gt;</span>
<span class="x">    &lt;div class="postbox"&gt;</span>
<span class="x">        &lt;h1&gt;</span><span class="cp">${</span><span class="n">title</span><span class="cp">}</span><span class="x">&lt;/h1&gt;</span>
<span class="x">        &lt;ul class="unstyled"&gt;</span>
            <span class="cp">%</span> <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span><span class="x"></span>
<span class="x">                &lt;li&gt;&lt;a href="</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">permalink</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">"&gt;[</span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">date_format</span><span class="p">)</span><span class="cp">}</span><span class="x">] </span><span class="cp">${</span><span class="n">post</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
            <span class="cp">%</span><span class="k"> endfor</span><span class="x"></span>
<span class="x">        &lt;/ul&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;!--End of body content--&gt;</span>
<span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>这个模板没有必要使用helper文件，因为没有这么多的功能。它只呈现一个包含文章标题的无序列表。
当然，你可以让更多从 <em>posts</em> 中的内容在这里面渲染出来。</p>
<p>当你对比将看到 <em>list.tmpl</em> 会发现用相同的代码，只是用 <em>items</em> 代替 <em>posts</em>：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;!--Body content--&gt;</span>
<span class="x">    &lt;div class="postbox"&gt;</span>
<span class="x">        &lt;h1&gt;</span><span class="cp">${</span><span class="n">title</span><span class="cp">}</span><span class="x">&lt;/h1&gt;</span>
<span class="x">        &lt;ul class="unstyled"&gt;</span>
            <span class="cp">%</span> <span class="k">for</span> <span class="n">text</span><span class="p">,</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span><span class="x"></span>
<span class="x">                &lt;li&gt;&lt;a href="</span><span class="cp">${</span><span class="n">link</span><span class="cp">}</span><span class="x">"&gt;</span><span class="cp">${</span><span class="n">text</span><span class="cp">}</span><span class="x">&lt;/a&gt;</span>
            <span class="cp">%</span><span class="k"> endfor</span><span class="x"></span>
<span class="x">        &lt;/ul&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;!--End of body content--&gt;</span>
<span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>下面是渲染对你有用户的不同年份列表。</p>
<p>文件 <em>tags.tmpl</em> 也是用 <em>items</em> 保存所有的信息：</p>
<pre class="code literal-block"><span class="cp">&lt;%</span><span class="nb">inherit</span> <span class="na">file=</span><span class="s">"base.tmpl"</span><span class="cp">/&gt;</span><span class="x"></span>
<span class="cp">&lt;%</span><span class="nb">block</span> <span class="na">name=</span><span class="s">"content"</span><span class="cp">&gt;</span><span class="x"></span>
<span class="x">    &lt;div class="postbox"&gt;</span>
<span class="x">    &lt;!--Body content--&gt;</span>
<span class="x">        &lt;h1&gt;</span><span class="cp">${</span><span class="n">title</span><span class="cp">}</span><span class="x">&lt;/h1&gt;</span>
<span class="x">        &lt;ul class="unstyled"&gt;</span>
        <span class="cp">%</span> <span class="k">for</span> <span class="n">text</span><span class="p">,</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span><span class="x"></span>
<span class="x">            &lt;li&gt;&lt;a class="tag" href="</span><span class="cp">${</span><span class="n">link</span><span class="cp">}</span><span class="x">"&gt;&lt;span class="badge badge-info"&gt;</span><span class="cp">${</span><span class="n">text</span><span class="cp">}</span><span class="x">&lt;/span&gt;&lt;/a&gt;</span>
        <span class="cp">%</span><span class="k"> endfor</span><span class="x"></span>
<span class="x">        &lt;/ul&gt;</span>
<span class="x">    &lt;!--End of body content--&gt;</span>
<span class="x">&lt;/div&gt;</span>
<span class="cp">&lt;/%</span><span class="nb">block</span><span class="cp">&gt;</span><span class="x"></span>
</pre>


<p>呼，我们已经写了所有必要的模板文件。
这意味着现在Nikola有足够的信息来呈现出每一个独立HTML页面。</p>
<h3>测试运行</h3>
<p>那么，你准备好进入构建的第二阶段了吗？这一次有自己的主题了吗？冲啊！</p>
<pre class="code literal-block"><span class="nv">$ </span>nikola build
</pre>


<p>如果您仍然在另一个终端有Nikola服务器运行，你就可以刷新页面，这样就看到你新的模板。
当然，我们没有写任何CSS，所以一切看起来挺像<a href="https://duckduckgo.com/?q=css+naked+day" title="在 DuckDuckGo 中的 css naked day">CSS Naked Day</a>（这本身是一个很好的测试）。</p>
<p>在这篇文章的开头，我们构建了页眉和包含一些CSS文件，这些文件我已经用在Shisaa.jp中。继续修改你的主题风格并正确地链接到这些文件，并重新编译。</p>
<p>现在你有了一个可以运行的Nikola的网站了！</p>
<p>我希望我能让你的指尖在建立Nikola网站过程中充满力量。
现在可以进行更多了，我鼓励你去探索更多的功能，如画廊，多种语言，DISQUS一体化，尝试不同的标记语言，...</p>
<p>和往常一样...感谢你的阅读！</p>
<hr>
<h3>后记</h3>
<p>很开心陆续花了3天时间翻译完了这篇文章，因英文水平和表达能力有限，有翻译不对的地方或者建议欢迎联系<a href="mailto:mike.cyc@gmail.com" title="Mike's Email">Mike Chen</a>，同时也欢迎更多喜欢Nikola的Funs一同分享心得，谢谢你的阅读！</p>
</div>
            </div>
        </div>
            <nav class="postindexpager"><ul class="pager">
<li class="previous">
                <a href="." rel="prev">新一篇</a>
            </li>
        </ul></nav><script>var disqus_shortname="nikolademo";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2016         <a href="mailto:539234@qq.com">七</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="assets/js/jquery.timeago.js" type="text/javascript"></script><script src="assets/js/mathjax.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
